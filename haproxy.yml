---
- hosts: proxy
  become: true
  vars_files:
    - vars/haproxy.yml

  roles:
    - haproxy-role
  tasks:
    - name: ensure firewalld is installed
      dnf: 
        name: firewalld
        state: latest

    - name: ensure firewalld is enabled and started 
      systemd:
        name: firewalld
        state: started
        enabled: yes

    - name: open port 80 and 443
      firewalld:
        port: "{{item}}"
        permanent: yes
        immediate: yes
        state: enabled
      loop:
        - 80/tcp
        - 443/tcp

